(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5706],{58389:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/chat",function(){return n(16551)}])},12457:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(67294),a=n(39548),i=function(){(0,r.useEffect)(function(){a.w.push({event:"page_view"})},[])}},16551:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e0}});var r=n(828),a=n(85893),i=n(67294),s=n(9008),c=n.n(s),o=n(39332),d=n(11347),u=n(98396),l=n(67720),h=n(87357),f=n(93946),p=n(53219),x=n(12457),v=n(47986),Z=n(15861),m=function(){return(0,a.jsxs)(h.Z,{sx:{alignItems:"center",display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,a.jsx)(h.Z,{component:"img",src:"/assets/errors/error-404.png",sx:{height:"auto",maxWidth:120}}),(0,a.jsx)(Z.Z,{color:"text.secondary",sx:{mt:2},variant:"subtitle1",children:"Start meaningful conversations!"})]})},y=n(47568),g=n(26042),b=n(69396),j=n(36305),C=n(70655),k=n(94690),A=n(17573),w=n(51438),T=n(48962),I=n(46263),S=n(88330),R=n(1784),_=n(7069),E=new Date,P=[{id:"5e8891ab188cd2855e6029b7",avatar:"/assets/avatars/avatar-alcides-antonio.png",isActive:!0,lastActivity:E.getTime(),name:"Alcides Antonio"},{id:"5e887a62195cc5aef7e8ca5d",avatar:"/assets/avatars/avatar-marcus-finn.png",isActive:!1,lastActivity:(0,S.Z)(E,2).getTime(),name:"Marcus Finn"},{id:"5e887ac47eed253091be10cb",avatar:"/assets/avatars/avatar-carson-darrin.png",isActive:!1,lastActivity:(0,R.Z)(E,15).getTime(),name:"Carson Darrin"},{id:"5e887b209c28ac3dd97f6db5",avatar:"/assets/avatars/avatar-fran-perez.png",isActive:!0,lastActivity:E.getTime(),name:"Fran Perez"},{id:"5e887b7602bdbc4dbb234b27",avatar:"/assets/avatars/avatar-jie-yan-song.png",isActive:!0,lastActivity:E.getTime(),name:"Jie Yan Song"},{id:"5e86805e2bafd54f66cc95c3",avatar:"/assets/avatars/avatar-miron-vitold.png",isActive:!1,lastActivity:(0,S.Z)(E,1).getTime(),name:"Miron Vitold"},{id:"5e887a1fbefd7938eea9c981",avatar:"/assets/avatars/avatar-penjani-inyene.png",isActive:!1,lastActivity:(0,S.Z)(E,6).getTime(),name:"Penjani Inyene"},{id:"5e887d0b3d090c1b8f162003",avatar:"/assets/avatars/avatar-omar-darboe.png",isActive:!0,lastActivity:E.getTime(),name:"Omar Darobe"},{id:"5e88792be2d4cfb4bf0971d9",avatar:"/assets/avatars/avatar-siegbert-gottfried.png",isActive:!0,lastActivity:E.getTime(),name:"Siegbert Gottfried"},{id:"5e8877da9a65442b11551975",avatar:"/assets/avatars/avatar-iulia-albu.png",isActive:!0,lastActivity:E.getTime(),name:"Iulia Albu"},{id:"5e8680e60cba5019c5ca6fda",avatar:"/assets/avatars/avatar-nasimiyu-danai.png",isActive:!0,lastActivity:E.getTime(),name:"Nasimiyu Danai"}],D=[{id:"5e867eb9de721aecaccf4f7b",messages:[{id:"5e867f0a5bc0ff2bfa07bfa6",attachments:[],body:"Hey, nice projects! I really liked the one in react. What's your quote on kinda similar project?",contentType:"text",createdAt:(0,_.Z)((0,S.Z)(E,10),4).getTime(),authorId:"5e86805e2bafd54f66cc95c3"},{id:"5e867f167d5f78109ae9f2a4",attachments:[],body:"I would need to know more details, but my hourly rate stats at $35/hour. Thanks!",contentType:"text",createdAt:(0,_.Z)((0,S.Z)(E,2),4).getTime(),authorId:"5e86809283e28b96d2d38537"},{id:"5e867f1c9ca72084693528f4",attachments:[],body:"Well it's a really easy one, I'm sure we can make it half of the price.",contentType:"text",createdAt:(0,S.Z)(E,5).getTime(),authorId:"5e86805e2bafd54f66cc95c3"},{id:"5e867f22fd2e27a09849b4db",attachments:[],body:"Then why don't you make it if it's that easy? Sorry I'm not interetes, have fantastic day Adam!",contentType:"text",createdAt:(0,S.Z)(E,3).getTime(),authorId:"5e86809283e28b96d2d38537"},{id:"5e867f28a34d45ac6eb5c41f",attachments:[],body:"Last offer, $25 per hour",contentType:"text",createdAt:(0,S.Z)(E,2).getTime(),authorId:"5e86805e2bafd54f66cc95c3"},{id:"5e867f2dba984a3f78b33526",attachments:[],body:"/assets/covers/minimal-1-4x3-small.png",contentType:"image",createdAt:(0,S.Z)(E,1).getTime(),authorId:"5e86805e2bafd54f66cc95c3"}],participantIds:["5e86809283e28b96d2d38537","5e86805e2bafd54f66cc95c3"],type:"ONE_TO_ONE",unreadCount:2},{id:"5e867fa7082c3c5921403a26",messages:[{id:"5e867fc180837d901bd9bca1",attachments:[],body:"Hey, would you like to collaborate?",contentType:"text",createdAt:(0,_.Z)((0,R.Z)(E,6),3).getTime(),authorId:"5e8680e60cba5019c5ca6fda"},{id:"5e8d6fb695df7971237fc173",attachments:[],body:"Hi, Merrile!",contentType:"text",createdAt:(0,_.Z)((0,R.Z)(E,5),3).getTime(),authorId:"5e86809283e28b96d2d38537"},{id:"58825a290eb4d4271a54f188",attachments:[],body:"Hello everyone \uD83D\uDE00",contentType:"text",createdAt:(0,_.Z)((0,R.Z)(E,2),1).getTime(),authorId:"5e8891ab188cd2855e6029b7"}],participantIds:["5e86809283e28b96d2d38537","5e8680e60cba5019c5ca6fda","5e8891ab188cd2855e6029b7"],type:"GROUP",unreadCount:0}],O={id:"5e86809283e28b96d2d38537",avatar:"/assets/avatars/avatar-anika-visser.png",name:"Anika Visser"},F=function(e){return D.find(function(t){return t.id===e})},M=function(e){return D.find(function(t){if(t.participantIds.length!==e.length)return!1;var n=new Set;return t.participantIds.forEach(function(t){e.includes(t)&&n.add(t)}),n.size===e.length})},W=new(function(){function e(){(0,w.Z)(this,e)}var t=e.prototype;return t.getContacts=function(e){var t=e.query;return new Promise(function(e,n){try{var r=P;if(t){var a=t.toLowerCase().trim();r=r.filter(function(e){return e.name.toLowerCase().includes(a)})}e((0,I.p)(r))}catch(i){console.error("[Chat Api]: ",i),n(Error("Internal server error"))}})},t.getThreads=function(e){var t=D.map(function(e){var t=[O];return P.forEach(function(n){e.participantIds.includes(n.id)&&t.push({id:n.id,avatar:n.avatar,lastActivity:n.lastActivity,name:n.name})}),(0,b.Z)((0,g.Z)({},e),{participants:t})});return Promise.resolve((0,I.p)(t))},t.getThread=function(e){var t=e.threadKey;return new Promise(function(e,n){if(!t){n(Error("Thread key is required"));return}try{var r,a=P.find(function(e){return e.id===t});if(a&&(r=M([O.id,a.id])),r||(r=F(t)),!r)return e(null);var i=[O];P.forEach(function(e){r.participantIds.includes(e.id)&&i.push({id:e.id,avatar:e.avatar,lastActivity:e.lastActivity,name:e.name})});var s=(0,b.Z)((0,g.Z)({},r),{participants:i});e((0,I.p)(s))}catch(c){console.error("[Chat Api]: ",c),n(Error("Internal server error"))}})},t.markThreadAsSeen=function(e){var t=e.threadId;return new Promise(function(e,n){try{var r=D.find(function(e){return e.id===t});r&&(r.unreadCount=0),e(!0)}catch(a){console.error("[Chat Api]: ",a),n(Error("Internal server error"))}})},t.getParticipants=function(e){var t=e.threadKey;return new Promise(function(e,n){try{var r=[O],a=F(t);if(a)P.forEach(function(e){a.participantIds.includes(e.id)&&r.push({id:e.id,avatar:e.avatar,lastActivity:e.lastActivity,name:e.name})});else{var i=P.find(function(e){return e.id===t});if(!i){n(Error("Unable to find the contact"));return}r.push({id:i.id,avatar:i.avatar,lastActivity:i.lastActivity,name:i.name})}return e(r)}catch(s){console.error("[Chat Api]: ",s),n(Error("Internal server error"))}})},t.addMessage=function(e){var t=e.threadId,n=e.recipientIds,r=e.body;return new Promise(function(e,a){try{if(!(t||n)){a(Error("Thread ID or recipient IDs has to be provided"));return}if(t){if(!(i=F(t))){a(Error("Invalid thread id"));return}}else{var i,s=[O.id].concat((0,j.Z)(n||[]));i=M(s)}if(!i){var c=[O.id].concat((0,j.Z)(n||[]));i={id:(0,T.h)(),messages:[],participantIds:c,type:2===c.length?"ONE_TO_ONE":"GROUP",unreadCount:0},D.push(i)}var o={id:(0,T.h)(),attachments:[],body:r,contentType:"text",createdAt:new Date().getTime(),authorId:O.id};i.messages.push(o),e({threadId:i.id,message:o})}catch(d){console.error("[Chat Api]: ",d),a(Error("Internal server error"))}})},e}()),K=n(8928),q={addMessage:function(e){var t;return t=(0,y.Z)(function(t){var n;return(0,C.__generator)(this,function(r){switch(r.label){case 0:return[4,W.addMessage(e)];case 1:return n=r.sent(),t(K.t.actions.addMessage(n)),[2,n.threadId]}})}),function(e){return t.apply(this,arguments)}},getContacts:function(){var e;return e=(0,y.Z)(function(e){var t;return(0,C.__generator)(this,function(n){switch(n.label){case 0:return[4,W.getContacts({})];case 1:return t=n.sent(),e(K.t.actions.getContacts(t)),[2]}})}),function(t){return e.apply(this,arguments)}},getThread:function(e){var t;return t=(0,y.Z)(function(t){var n;return(0,C.__generator)(this,function(r){switch(r.label){case 0:return[4,W.getThread(e)];case 1:return n=r.sent(),t(K.t.actions.getThread(n)),[2,null==n?void 0:n.id]}})}),function(e){return t.apply(this,arguments)}},getThreads:function(){var e;return e=(0,y.Z)(function(e){var t;return(0,C.__generator)(this,function(n){switch(n.label){case 0:return[4,W.getThreads()];case 1:return t=n.sent(),e(K.t.actions.getThreads(t)),[2]}})}),function(t){return e.apply(this,arguments)}},markThreadAsSeen:function(e){var t;return t=(0,y.Z)(function(t){return(0,C.__generator)(this,function(n){switch(n.label){case 0:return[4,W.markThreadAsSeen(e)];case 1:return n.sent(),t(K.t.actions.markThreadAsSeen(e.threadId)),[2]}})}),function(e){return t.apply(this,arguments)}},setCurrentThread:function(e){return function(t){t(K.t.actions.setCurrentThread(e.threadId))}}},G=n(99534),N=n(45697),H=n.n(N),L=n(95226),U=n(23926),z=n(57709),B=n(87109),V=n(17417),X=n(11791),$=n(78462),J=n(98619),Y=n(18987),Q=n(87952),ee=n(59334),et=n(26447),en=n(87918),er=n(70515),ea=function(e){var t,n=e.onRecipientAdd,s=e.onRecipientRemove,c=e.recipients,o=void 0===c?[]:c,d=(0,G.Z)(e,["onRecipientAdd","onRecipientRemove","recipients"]),u=(0,i.useRef)(null),l=(0,r.Z)((0,i.useState)(!1),2),f=l[0],x=l[1],v=(0,r.Z)((0,i.useState)(""),2),m=v[0],j=v[1],k=(0,r.Z)((0,i.useState)([]),2),A=k[0],w=k[1],T=!!(f&&m),I=A.length>0,S=(0,i.useCallback)((t=(0,y.Z)(function(e){var t,n,r;return(0,C.__generator)(this,function(a){switch(a.label){case 0:if(j(t=e.target.value),!t)return w([]),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,W.getContacts({query:t})];case 2:return n=a.sent(),r=o.map(function(e){return e.id}),w(n.filter(function(e){return!r.includes(e.id)})),[3,4];case 3:return console.error(a.sent()),[3,4];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[o]),R=(0,i.useCallback)(function(){T&&x(!1)},[T]),_=(0,i.useCallback)(function(){x(!0)},[]),E=(0,i.useCallback)(function(e){j(""),null==n||n(e)},[n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.Z,(0,b.Z)((0,g.Z)({},d),{children:(0,a.jsx)(er.L,{children:(0,a.jsxs)(h.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,a.jsx)(U.Z,{onClickAway:R,children:(0,a.jsxs)(h.Z,{sx:{mr:1},children:[(0,a.jsx)(z.Z,{fullWidth:!0,onChange:S,onFocus:_,placeholder:"Search contacts",ref:u,startAdornment:(0,a.jsx)(B.Z,{position:"start",children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(L.Z,{})})}),sx:{"&.MuiInputBase-root":{height:40,minWidth:260}},value:m}),T&&(0,a.jsx)(V.Z,{anchorEl:u.current,open:f,placement:"bottom-start",children:(0,a.jsx)(X.Z,{elevation:16,sx:{borderColor:"divider",borderStyle:"solid",borderWidth:1,maxWidth:"100%",mt:1,width:320},children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{sx:{px:2,pt:2},children:(0,a.jsx)(Z.Z,{color:"text.secondary",variant:"subtitle2",children:"Contacts"})}),(0,a.jsx)($.Z,{children:A.map(function(e){return(0,a.jsxs)(J.Z,{onClick:function(){return E(e)},children:[(0,a.jsx)(Y.Z,{children:(0,a.jsx)(Q.Z,{src:e.avatar})}),(0,a.jsx)(ee.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)})})]}):(0,a.jsxs)(h.Z,{sx:{p:2,textAlign:"center"},children:[(0,a.jsx)(Z.Z,{gutterBottom:!0,variant:"h6",children:"Nothing Found"}),(0,a.jsxs)(Z.Z,{color:"text.secondary",variant:"body2",children:["We couldn't find any matches for \"",m,'". Try checking for typos or using complete words.']})]})})})]})}),(0,a.jsx)(Z.Z,{color:"text.secondary",sx:{mr:2},variant:"body2",children:"To:"}),(0,a.jsx)(et.Z,{alignItems:"center",direction:"row",spacing:2,children:o.map(function(e){return(0,a.jsx)(en.Z,{avatar:(0,a.jsx)(Q.Z,{src:e.avatar}),label:e.name,onDelete:function(){return null==s?void 0:s(e.id)}},e.id)})})]})})}))})};ea.propTypes={onRecipientAdd:H().func,onRecipientRemove:H().func,recipients:H().array};var ei=n(35485),es=n(51647),ec=n(3753),eo=n(34386),ed=n(37393),eu=function(e){var t=e.disabled,n=e.onSend,s=(0,G.Z)(e,["disabled","onSend"]),c=(0,ed.I)(),o=(0,i.useRef)(null),d=(0,r.Z)((0,i.useState)(""),2),u=d[0],l=d[1],x=(0,i.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.click()},[]),v=(0,i.useCallback)(function(e){l(e.target.value)},[]),Z=(0,i.useCallback)(function(){u&&(null==n||n(u),l(""))},[u,n]),m=(0,i.useCallback)(function(e){"Enter"===e.code&&Z()},[Z]);return(0,a.jsxs)(et.Z,(0,b.Z)((0,g.Z)({alignItems:"center",direction:"row",spacing:2,sx:{px:3,py:1}},s),{children:[(0,a.jsx)(Q.Z,{sx:{display:{xs:"none",sm:"inline"}},src:c.avatar}),(0,a.jsx)(z.Z,{disabled:t,fullWidth:!0,onChange:v,onKeyUp:m,placeholder:"Leave a message",size:"small",value:u}),(0,a.jsxs)(h.Z,{sx:{alignItems:"center",display:"flex",m:-2,ml:2},children:[(0,a.jsx)(eo.Z,{title:"Send",children:(0,a.jsx)(h.Z,{sx:{m:1},children:(0,a.jsx)(f.Z,{color:"primary",disabled:!u||t,sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}},onClick:Z,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(ec.Z,{})})})})}),(0,a.jsx)(eo.Z,{title:"Attach photo",children:(0,a.jsx)(h.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,a.jsx)(f.Z,{disabled:t,edge:"end",onClick:x,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(es.Z,{})})})})}),(0,a.jsx)(eo.Z,{title:"Attach file",children:(0,a.jsx)(h.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,a.jsx)(f.Z,{disabled:t,edge:"end",onClick:x,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(ei.Z,{})})})})})]}),(0,a.jsx)("input",{hidden:!0,ref:o,type:"file"})]}))};eu.propTypes={disabled:H().bool,onSend:H().func},eu.defaultProps={disabled:!1};var el=function(){var e=(0,r.Z)((0,i.useState)([]),2),t=e[0],n=e[1];return{onRecipientAdd:(0,i.useCallback)(function(e){n(function(t){return t.find(function(t){return t.id===e.id})?t:(0,j.Z)(t).concat([e])})},[]),onRecipientRemove:(0,i.useCallback)(function(e){n(function(t){return t.filter(function(t){return t.id!==e})})},[]),recipients:t}},eh=function(e){var t,n=(0,A.I0)(),r=(0,o.useRouter)(),s=el(),c=s.onRecipientAdd,d=s.onRecipientRemove,u=s.recipients,f=(0,i.useCallback)((t=(0,y.Z)(function(e){var t,a;return(0,C.__generator)(this,function(i){switch(i.label){case 0:t=u.map(function(e){return e.id}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n(q.addMessage({recipientIds:t,body:e}))];case 2:return a=i.sent(),[3,4];case 3:return console.error(i.sent()),[2];case 4:return r.push(k.H.dashboard.chat+"?threadKey=".concat(a)),[2]}})}),function(e){return t.apply(this,arguments)}),[n,r,u]),p=u.length>0;return(0,a.jsxs)(h.Z,(0,b.Z)((0,g.Z)({sx:{display:"flex",flexDirection:"column",flexGrow:1}},e),{children:[(0,a.jsx)(ea,{onRecipientAdd:c,onRecipientRemove:d,recipients:u}),(0,a.jsx)(l.Z,{}),(0,a.jsx)(h.Z,{sx:{flexGrow:1}}),(0,a.jsx)(l.Z,{}),(0,a.jsx)(eu,{disabled:!p,onSend:f})]}))},ef=n(14924),ep=(0,n(90948).ZP)("div",{shouldForwardProp:function(e){return"open"!==e}})(function(e){var t,n,r=e.theme,a=e.open;return(0,g.Z)((t={display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"},(0,ef.Z)(t,r.breakpoints.up("md"),{marginLeft:-380}),(0,ef.Z)(t,"transition",r.transitions.create("margin",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen})),t),a&&(n={},(0,ef.Z)(n,r.breakpoints.up("md"),{marginLeft:0}),(0,ef.Z)(n,"transition",r.transitions.create("margin",{easing:r.transitions.easing.easeOut,duration:r.transitions.duration.enteringScreen})),n))}),ex=n(10216),ev=n(45331),eZ=n(11057),em=n(77533),ey=n(71379),eg=(0,i.forwardRef)(function(e,t){var n=e.isFocused,r=e.onChange,s=e.onClickAway,c=e.onFocus,o=e.onSelect,d=e.query,u=void 0===d?"":d,l=e.results,f=void 0===l?[]:l,x=(0,G.Z)(e,["isFocused","onChange","onClickAway","onFocus","onSelect","query","results"]),v=(0,i.useCallback)(function(e){null==o||o(e)},[o]),m=f.length>0;return(0,a.jsx)(U.Z,{onClickAway:void 0===s?function(){}:s,children:(0,a.jsxs)(h.Z,(0,b.Z)((0,g.Z)({ref:t,sx:{p:2}},x),{children:[(0,a.jsx)(z.Z,{fullWidth:!0,onChange:r,onFocus:c,placeholder:"Search contacts",startAdornment:(0,a.jsx)(B.Z,{position:"start",children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(L.Z,{})})}),value:u}),n&&!u&&(0,a.jsx)(h.Z,{sx:{py:2},children:(0,a.jsx)(ey.C,{message:"Enter a contact name"})}),n&&u&&(0,a.jsx)(a.Fragment,{children:m?(0,a.jsxs)(h.Z,{sx:{py:2},children:[(0,a.jsx)(Z.Z,{color:"text.secondary",variant:"subtitle2",children:"Contacts"}),(0,a.jsx)($.Z,{children:f.map(function(e){return(0,a.jsxs)(J.Z,{onClick:function(){return v(e)},children:[(0,a.jsx)(Y.Z,{children:(0,a.jsx)(Q.Z,{src:e.avatar,sx:{height:32,width:32}})}),(0,a.jsx)(ee.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)})})]}):(0,a.jsx)(h.Z,{sx:{py:2},children:(0,a.jsxs)(Z.Z,{color:"text.secondary",variant:"body2",children:["We couldn't find any matches for \"",u,'". Try checking for typos or using complete words.']})})})]}))})});eg.propTypes={isFocused:H().bool,onChange:H().func,onClickAway:H().func,onFocus:H().func,onSelect:H().func,query:H().string,results:H().array};var eb=n(12195),ej=n(51107),eC=n(54801),ek=n(19552),eA=function(e){var t;return null===(t=e.messages)||void 0===t?void 0:t[e.messages.length-1]},ew=function(e,t){if(!t)return"";var n=t.authorId===e?"Me: ":"",r="image"===t.contentType?"Sent a photo":t.body;return"".concat(n).concat(r)},eT=function(e){var t,n,r=e.active,i=e.thread,s=e.onSelect,c=(0,G.Z)(e,["active","thread","onSelect"]),o=(0,ed.I)(),d=(t=i.participants||[],n=o.id,t.filter(function(e){return e.id!==n})),u=eA(i),l=u?(0,eb.Z)(u.createdAt,new Date,{addSuffix:!1,locale:ek.Z}):null,f=d.map(function(e){return e.name}).join(", "),p=ew(o.id,u),x=d.length>1,v=!!(i.unreadCount&&i.unreadCount>0);return(0,a.jsxs)(et.Z,(0,b.Z)((0,g.Z)({component:"li",direction:"row",onClick:s,spacing:2,sx:(0,g.Z)({borderRadius:2.5,cursor:"pointer",px:3,py:2,"&:hover":{backgroundColor:"action.hover"}},r&&{backgroundColor:"action.hover"})},c),{children:[(0,a.jsx)("div",{children:(0,a.jsx)(ej.Z,{max:2,sx:(0,ef.Z)({},"& .".concat(eC.Z.root),x?{height:26,width:26,"&:nth-of-type(2)":{mt:"10px"}}:{height:36,width:36}),children:d.map(function(e){return(0,a.jsx)(Q.Z,{src:e.avatar||void 0},e.id)})})}),(0,a.jsxs)(h.Z,{sx:{flexGrow:1,overflow:"hidden"},children:[(0,a.jsx)(Z.Z,{noWrap:!0,variant:"subtitle2",children:f}),(0,a.jsxs)(et.Z,{alignItems:"center",direction:"row",spacing:1,children:[v&&(0,a.jsx)(h.Z,{sx:{backgroundColor:"primary.main",borderRadius:"50%",height:8,width:8}}),(0,a.jsx)(Z.Z,{color:"text.secondary",noWrap:!0,sx:{flexGrow:1},variant:"subtitle2",children:p})]})]}),l&&(0,a.jsx)(Z.Z,{color:"text.secondary",sx:{whiteSpace:"nowrap"},variant:"caption",children:l})]}))};eT.propTypes={active:H().bool,onSelect:H().func,thread:H().object.isRequired},eT.defaultProps={active:!1};var eI=function(e){var t,n=e.container,s=e.onClose,c=e.open,d=(0,G.Z)(e,["container","onClose","open"]),l=(0,ed.I)(),x=(0,o.useRouter)(),v=(0,A.v9)(function(e){return e.chat.threads}),m=(0,A.v9)(function(e){return e.chat.currentThreadId}),j=(0,r.Z)((0,i.useState)(!1),2),w=j[0],T=j[1],I=(0,r.Z)((0,i.useState)(""),2),S=I[0],R=I[1],_=(0,r.Z)((0,i.useState)([]),2),E=_[0],P=_[1],D=(0,u.Z)(function(e){return e.breakpoints.up("md")}),O=(0,i.useCallback)(function(){x.push(k.H.dashboard.chat+"?compose=true")},[x]),F=(0,i.useCallback)((t=(0,y.Z)(function(e){var t;return(0,C.__generator)(this,function(n){switch(n.label){case 0:if(R(t=e.target.value),!t)return P([]),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,W.getContacts({query:t})];case 2:return P(n.sent()),[3,4];case 3:return console.error(n.sent()),[3,4];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[]),M=(0,i.useCallback)(function(){w&&(T(!1),R(""))},[w]),K=(0,i.useCallback)(function(){T(!0)},[]),q=(0,i.useCallback)(function(e){var t=e.id;T(!1),R(""),x.push(k.H.dashboard.chat+"?threadKey=".concat(t))},[x]),N=(0,i.useCallback)(function(e){var t,n,r=(t=v.byId[e],n=l.id,"GROUP"===t.type?t.id:t.participantIds.find(function(e){return e!==n}));r?x.push(k.H.dashboard.chat+"?threadKey=".concat(r)):x.push(k.H.dashboard.chat)},[x,v,l]),H=(0,a.jsxs)("div",{children:[(0,a.jsxs)(et.Z,{alignItems:"center",direction:"row",spacing:2,sx:{p:2},children:[(0,a.jsx)(Z.Z,{variant:"h5",sx:{flexGrow:1},children:"Chats"}),(0,a.jsx)(eZ.Z,{onClick:O,startIcon:(0,a.jsx)(p.Z,{children:(0,a.jsx)(ex.Z,{})}),variant:"contained",children:"Group"}),!D&&(0,a.jsx)(f.Z,{onClick:s,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(ev.Z,{})})})]}),(0,a.jsx)(eg,{isFocused:w,onChange:F,onClickAway:M,onFocus:K,onSelect:q,query:S,results:E}),(0,a.jsx)(h.Z,{sx:{display:w?"none":"block"},children:(0,a.jsx)(er.L,{children:(0,a.jsx)(et.Z,{component:"ul",spacing:.5,sx:{listStyle:"none",m:0,p:2},children:v.allIds.map(function(e){return(0,a.jsx)(eT,{active:m===e,onSelect:function(){return N(e)},thread:v.byId[e]},e)})})})})]});return D?(0,a.jsx)(em.ZP,(0,b.Z)((0,g.Z)({anchor:"left",open:c,PaperProps:{sx:{position:"relative",width:380}},SlideProps:{container:n},variant:"persistent"},d),{children:H})):(0,a.jsx)(em.ZP,(0,b.Z)((0,g.Z)({anchor:"left",hideBackdrop:!0,ModalProps:{container:n,sx:{pointerEvents:"none",position:"absolute"}},onClose:s,open:c,PaperProps:{sx:{maxWidth:"100%",width:380,pointerEvents:"auto",position:"absolute"}},SlideProps:{container:n},variant:"temporary"},d),{children:H}))};eI.propTypes={container:H().any,onClose:H().func,open:H().bool};var eS=n(44086),eR=n(66242),e_=n(23795),eE=n(83965),eP=function(e){var t=e.authorAvatar,n=e.authorName,r=e.body,i=e.contentType,s=e.createdAt,c=e.position,o=(0,G.Z)(e,["authorAvatar","authorName","body","contentType","createdAt","position"]),d=(0,eS.Z)(s);return(0,a.jsx)(h.Z,(0,b.Z)((0,g.Z)({sx:{display:"flex",alignItems:"right"===c?"flex-end":"flex-start"}},o),{children:(0,a.jsxs)(et.Z,{alignItems:"flex-start",direction:"right"===c?"row-reverse":"row",spacing:2,sx:{maxWidth:500,ml:"right"===c?"auto":0,mr:"left"===c?"auto":0},children:[(0,a.jsx)(Q.Z,{src:t||void 0,sx:{height:32,width:32}}),(0,a.jsxs)(h.Z,{sx:{flexGrow:1},children:[(0,a.jsxs)(eR.Z,{sx:{backgroundColor:"right"===c?"primary.main":"background.paper",color:"right"===c?"primary.contrastText":"text.primary",px:2,py:1},children:[(0,a.jsx)(h.Z,{sx:{mb:1},children:(0,a.jsx)(e_.Z,{color:"inherit",sx:{cursor:"pointer"},variant:"subtitle2",children:n})}),"image"===i&&(0,a.jsx)(eE.Z,{onClick:function(){},image:r,sx:{height:200,width:200}}),"text"===i&&(0,a.jsx)(Z.Z,{color:"inherit",variant:"body1",children:r})]}),(0,a.jsx)(h.Z,{sx:{display:"flex",justifyContent:"right"===c?"flex-end":"flex-start",mt:1,px:2},children:(0,a.jsxs)(Z.Z,{color:"text.secondary",noWrap:!0,variant:"caption",children:[d," ","ago"]})})]})]})}))};eP.propTypes={authorAvatar:H().string.isRequired,authorName:H().string.isRequired,body:H().string.isRequired,contentType:H().string.isRequired,createdAt:H().number.isRequired,position:H().oneOf(["left","right"])};var eD=function(e,t,n){var r=t.find(function(t){return t.id===e.authorId});return r?e.authorId===n.id?{name:"Me",avatar:n.avatar,isUser:!0}:{avatar:r.avatar,name:r.name,isUser:!1}:{name:"Unknown",avatar:"",isUser:!1}},eO=function(e){var t=e.messages,n=e.participants,r=(0,G.Z)(e,["messages","participants"]),i=(0,ed.I)();return(0,a.jsx)(et.Z,(0,b.Z)((0,g.Z)({spacing:2,sx:{p:3}},r),{children:t.map(function(e){var t=eD(e,n,i);return(0,a.jsx)(eP,{authorAvatar:t.avatar,authorName:t.name,body:e.body,contentType:e.contentType,createdAt:e.createdAt,position:t.isUser?"right":"left"},e.id)})}))};eO.propTypes={messages:H().array,participants:H().array};var eF=n(97512),eM=n(46621),eW=n(83075),eK=n(12046),eq=n(39628),eG=n(72591),eN=n(25464),eH=n(63931),eL=n(48885),eU=function(e){var t,n=e.participants,s=(0,G.Z)(e,["participants"]),c=(0,ed.I)(),o=(0,i.useRef)(null),d=(0,r.Z)((0,i.useState)(!1),2),u=d[0],l=d[1],h=(0,i.useCallback)(function(){l(!0)},[]),x=(0,i.useCallback)(function(){l(!1)},[]),v=(t=c.id,(void 0===n?[]:n).filter(function(e){return e.id!==t})),m=v.map(function(e){return e.name}).join(", "),y=1===v.length&&v[0].lastActivity?(0,eS.Z)(v[0].lastActivity,{addSuffix:!0}):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(et.Z,(0,b.Z)((0,g.Z)({alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{flexShrink:0,minHeight:64,px:2,py:1}},s),{children:[(0,a.jsxs)(et.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,a.jsx)(ej.Z,{max:2,sx:(0,g.Z)({},v.length>1&&{"& .MuiAvatar-root":{height:30,width:30,"&:nth-of-type(2)":{mt:"10px"}}}),children:v.map(function(e){return(0,a.jsx)(Q.Z,{src:e.avatar||void 0},e.id)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Z.Z,{variant:"subtitle2",children:m}),y&&(0,a.jsxs)(Z.Z,{color:"text.secondary",variant:"caption",children:["Last active"," ",y]})]})]}),(0,a.jsxs)(et.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,a.jsx)(f.Z,{children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(eK.Z,{})})}),(0,a.jsx)(f.Z,{children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(es.Z,{})})}),(0,a.jsx)(eo.Z,{title:"More options",children:(0,a.jsx)(f.Z,{onClick:h,ref:o,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(eW.Z,{})})})})]})]})),(0,a.jsxs)(eN.Z,{anchorEl:o.current,keepMounted:!0,onClose:x,open:u,children:[(0,a.jsxs)(eH.Z,{children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(eq.Z,{})})}),(0,a.jsx)(ee.Z,{primary:"Block"})]}),(0,a.jsxs)(eH.Z,{children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(eG.Z,{})})}),(0,a.jsx)(ee.Z,{primary:"Delete"})]}),(0,a.jsxs)(eH.Z,{children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(eF.Z,{})})}),(0,a.jsx)(ee.Z,{primary:"Archive"})]}),(0,a.jsxs)(eH.Z,{children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(eM.Z,{})})}),(0,a.jsx)(ee.Z,{primary:"Mute"})]})]})]})};eU.propTypes={participants:H().array};var ez=function(e){var t=(0,o.useRouter)(),n=(0,r.Z)((0,i.useState)([]),2),a=n[0],s=n[1],c=(0,i.useCallback)((0,y.Z)(function(){return(0,C.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,W.getParticipants({threadKey:e})];case 1:return s(n.sent()),[3,3];case 2:return console.error(n.sent()),t.push(k.H.dashboard.chat),[3,3];case 3:return[2]}})}),[t,e]);return(0,i.useEffect)(function(){c()},[e]),a},eB=function(e){var t=(0,o.useRouter)(),n=(0,A.I0)(),r=(0,A.v9)(function(e){var t=e.chat,n=t.threads,r=t.currentThreadId;return n.byId[r]}),a=(0,i.useCallback)((0,y.Z)(function(){var r;return(0,C.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n(q.getThread({threadKey:e}))];case 1:return r=a.sent(),[3,3];case 2:return console.error(a.sent()),t.push(k.H.dashboard.chat),[2];case 3:return n(q.setCurrentThread({threadId:r})),r&&n(q.markThreadAsSeen({threadId:r})),[2]}})}),[t,n,e]);return(0,i.useEffect)(function(){a()},[e]),r},eV=function(e){var t=(0,i.useRef)(null),n=(0,i.useCallback)(function(){if(e&&t.current){var n=t.current;n.getScrollElement().scrollTop=n.el.scrollHeight}},[e]);return(0,i.useEffect)(function(){n()},[e]),{messagesRef:t}},eX=function(e){var t,n=e.threadKey,r=(0,G.Z)(e,["threadKey"]),s=(0,A.I0)(),c=(0,ed.I)(),o=eB(n),d=ez(n),u=eV(o).messagesRef,f=(0,i.useCallback)((t=(0,y.Z)(function(e){var t,n;return(0,C.__generator)(this,function(r){switch(r.label){case 0:if(!o)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s(q.addMessage({threadId:o.id,body:e}))];case 2:return r.sent(),[3,4];case 3:return console.error(r.sent()),[3,4];case 4:return[2];case 5:t=d.filter(function(e){return e.id!==c.id}).map(function(e){return e.id}),r.label=6;case 6:return r.trys.push([6,8,,9]),[4,s(q.addMessage({recipientIds:t,body:e}))];case 7:return n=r.sent(),[3,9];case 8:case 11:return console.error(r.sent()),[2];case 9:return r.trys.push([9,11,,12]),[4,s(q.getThread({threadKey:n}))];case 10:return r.sent(),[3,12];case 12:return s(q.setCurrentThread({threadId:n})),[2]}})}),function(e){return t.apply(this,arguments)}),[s,d,o,c]);return(0,a.jsxs)(et.Z,(0,b.Z)((0,g.Z)({sx:{flexGrow:1,overflow:"hidden"}},r),{children:[(0,a.jsx)(eU,{participants:d}),(0,a.jsx)(l.Z,{}),(0,a.jsx)(h.Z,{sx:{flexGrow:1,overflow:"hidden"},children:(0,a.jsx)(er.L,{ref:u,sx:{maxHeight:"100%"},children:(0,a.jsx)(eO,{messages:(null==o?void 0:o.messages)||[],participants:(null==o?void 0:o.participants)||[]})})}),(0,a.jsx)(l.Z,{}),(0,a.jsx)(eu,{onSend:f})]}))};eX.propTypes={threadKey:H().string.isRequired};var e$=function(){var e=(0,o.useSearchParams)();return{compose:"true"===e.get("compose"),threadKey:e.get("threadKey")||void 0}},eJ=function(){var e=(0,A.I0)(),t=(0,i.useCallback)(function(){e(q.getThreads())},[e]);(0,i.useEffect)(function(){t()},[])},eY=function(){var e=(0,o.useSearchParams)(),t=(0,u.Z)(function(e){return e.breakpoints.up("md")}),n=(0,r.Z)((0,i.useState)(t),2),a=n[0],s=n[1],c=(0,i.useCallback)(function(){t?s(!0):s(!1)},[t]);(0,i.useEffect)(function(){c()},[t]);var d=(0,i.useCallback)(function(){t||s(!1)},[t]);return(0,i.useEffect)(function(){d()},[e]),{isOpen:a,handleToggle:(0,i.useCallback)(function(){s(function(e){return!e})},[]),handleClose:(0,i.useCallback)(function(){s(!1)},[])}},eQ=function(){var e=(0,i.useRef)(null),t=e$(),n=t.compose,r=t.threadKey,s=eY();(0,x.a)(),eJ();var o=r?"thread":n?"compose":"blank";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"Dashboard: Chat | Devias Kit PRO"})}),(0,a.jsx)(l.Z,{}),(0,a.jsx)(h.Z,{component:"main",sx:{backgroundColor:"background.paper",flex:"1 1 auto",overflow:"hidden",position:"relative"},children:(0,a.jsxs)(h.Z,{ref:e,sx:{bottom:0,display:"flex",left:0,position:"absolute",right:0,top:0},children:[(0,a.jsx)(eI,{container:e.current,onClose:s.handleClose,open:s.isOpen}),(0,a.jsxs)(ep,{open:s.isOpen,children:[(0,a.jsx)(h.Z,{sx:{p:2},children:(0,a.jsx)(f.Z,{onClick:s.handleToggle,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(d.Z,{})})})}),(0,a.jsx)(l.Z,{}),"thread"===o&&(0,a.jsx)(eX,{threadKey:r}),"compose"===o&&(0,a.jsx)(eh,{}),"blank"===o&&(0,a.jsx)(m,{})]})]})})]})};eQ.getLayout=function(e){return(0,a.jsx)(v.A,{children:e})};var e0=eQ},46263:function(e,t,n){"use strict";n.d(t,{p:function(){return function e(t){return"object"!=typeof t||null===t?t:t instanceof Date?new Date(t.getTime()):t instanceof Array?t.reduce(function(t,n,r){return t[r]=e(n),t},[]):t instanceof Object?Object.keys(t).reduce(function(n,r){return n[r]=e(t[r]),n},{}):void 0}}})}},function(e){e.O(0,[8926,5978,8471,3155,1273,1220,4411,4824,9384,5017,7986,9774,2888,179],function(){return e(e.s=58389)}),_N_E=e.O()}]);